// Generated by CoffeeScript 1.7.1
var DidGetUsersData;

$(document).on("deviceready", function() {
  var nickname, type;
  nickname = unescape(getQueryString("nickname"));
  type = getQueryString("type");
  if (type.toLowerCase() === "follower") {
    $(".actionbar .page-title").text("粉丝");
    RequestAjax("GET", "/mj/people/" + nickname + "/fans", {}, DidGetUsersData, null);
  } else {
    $(".actionbar .page-title").text("关注");
    RequestAjax("GET", "/mj/people/" + nickname + "/concerned", {}, DidGetUsersData, null);
  }
  CenterTitle();
});

DidGetUsersData = function(data, rawData) {
  var htmlString, usersHTML;
  usersHTML = template("People/Follows");
  htmlString = usersHTML({
    Users: data.Data
  });
  if (htmlString.search("Template Error") < 0) {
    $(".container").replaceWith(htmlString);
  } else {
    ShowLoadingError();
    return;
  }
  $(".user").each(function() {
    $(this).find(".nickname").css("line-height", $(this).find("img").width() + "px");
  });
};
