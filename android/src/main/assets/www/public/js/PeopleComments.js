// Generated by CoffeeScript 1.7.1
var DidGetUserCommentsData;

$(document).on("deviceready", function() {
  var nickname, type;
  nickname = unescape(getQueryString("nickname"));
  type = getQueryString("type");
  if (type.toLowerCase() === "comment") {
    $(".actionbar .page-title").text("" + nickname + "发表的短评");
    RequestAjax("GET", "/mj/people/" + (unescape(nickname)) + "/comments", {}, DidGetUserCommentsData, null);
  } else {
    $(".actionbar .page-title").text("" + nickname + "发表的书评");
    RequestAjax("GET", "/mj/people/" + (unescape(nickname)) + "/reviews", {}, DidGetUserCommentsData, null);
  }
  CenterTitle();
});

DidGetUserCommentsData = function(data, rawData) {
  var htmlString, usersHTML;
  usersHTML = template("People/Comments");
  htmlString = usersHTML({
    Comments: data.Data
  });
  if (htmlString.search("Template Error") < 0) {
    $(".container").replaceWith(htmlString);
  } else {
    ShowLoadingError();
    return;
  }
};
